<!DOCTYPE html>
<html lang="so">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KOOSHIN AI | Island HD Filter</title>
    <style>
        body { margin: 0; background: #000; color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; display: flex; flex-direction: column; align-items: center; }
        
        .camera-box { position: relative; width: 100%; height: 80vh; background: #111; overflow: hidden; }
        
        /* Kamaradda oo leh Filter iPhone Cinematic ah */
        #webcam {
            width: 100%; height: 100%; object-fit: cover; transform: scaleX(-1);
            filter: brightness(1.1) contrast(1.1) saturate(1.4) sepia(0.05) sharp(1.1);
        }

        /* Jasiiradda Background-ka u ah (Overlay) */
        .island-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1350&q=80');
            background-size: cover; background-position: center;
            opacity: 0.4; /* Tani waxay isku dhex daraysaa adiga iyo jasiiradda */
            mix-blend-mode: screen; 
            pointer-events: none; z-index: 5;
        }

        .controls { height: 20vh; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #050505; border-top: 2px solid #00f2ff; }
        
        .rec-btn { width: 75px; height: 75px; background: white; border: 4px solid #333; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .rec-btn.active { background: #ff003c; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        
        .status { color: #00f2ff; margin-bottom: 10px; font-weight: bold; font-size: 14px; }
    </style>
</head>
<body>

    <div class="camera-box">
        <video id="webcam" autoplay playsinline muted></video>
        <div class="island-bg"></div> </div>

    <div class="controls">
        <p class="status" id="status">ISLAND FILTER: ACTIVE üèùÔ∏è</p>
        <div class="rec-btn" id="recBtn" onclick="toggleRecording()">
            <div style="width: 25px; height: 25px; background: red; border-radius: 50%;"></div>
        </div>
    </div>

    <script>
        let mediaRecorder;
        let recordedChunks = [];
        const videoElement = document.getElementById('webcam');

        async function startHD() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: "user", width: { ideal: 1920 }, height: { ideal: 1080 }, frameRate: 60 },
                    audio: true 
                });
                videoElement.srcObject = stream;
            } catch (err) {
                document.getElementById('status').innerText = "Fadlan ogolow Kamaradda!";
            }
        }

        function toggleRecording() {
            const btn = document.getElementById('recBtn');
            const status = document.getElementById('status');

            if (!mediaRecorder || mediaRecorder.state === "inactive") {
                recordedChunks = [];
                mediaRecorder = new MediaRecorder(videoElement.srcObject);
                mediaRecorder.ondataavailable = (e) => { if (e.data.size > 0) recordedChunks.push(e.data); };
                mediaRecorder.onstop = () => {
                    const blob = new Blob(recordedChunks, { type: 'video/mp4' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'Kooshin_Island_Video.mp4';
                    a.click();
                };
                mediaRecorder.start();
                btn.classList.add('active');
                status.innerText = "WAA LA DUUBAYAA... üé•";
            } else {
                mediaRecorder.stop();
                btn.classList.remove('active');
                status.innerText = "DIYAARINAYAA... ‚úÖ";
            }
        }

        startHD();
    </script>
</body>
</html>
